# app/map_utils/town.py

from config import MAP_WIDTH, MAP_HEIGHT # Import dimensions for validation
from typing import List
# --- Static Town Layout ---
TOWN_LAYOUT = [
    "##################################################################################################", # Row 1
    "#................................................................................................#", # Row 2
    "#................................................................................................#", # Row 3
    "#................................................................................................#", # Row 4
    "#.........................................................................#######................#", # Row 5
    "#.........................................................................#     #................#", # Row 6
    "#.........................................................................#     #................#", # Row 7
    "#..........##############.................................................#     #................#", # Row 8
    "#..........#            #.................................................#     #................#", # Row 9
    "#..........4            #.....................############................###1###................#", # Row 10 Armory / General Goods
    "#..........#            #.....................#          #.......................................#", # Row 11
    "#..........##############.....................#          3.......................................#", # Row 12 Tavern
    "#.............................................#          #.......................................#", # Row 13
    "#.............................................############.......................................#", # Row 14
    "#................................................................................................#", # Row 15
    "#................................................................................................#", # Row 16
    "#..............................>.................................................................#", # Row 17 (Stairs Down)
    "#................................................................................................#", # Row 18
    "#................................................................................................#", # Row 19
    "#.................................########.......................................................#", # Row 20
    "#.................................#      #.......................................................#", # Row 21
    "#...####2####.....................#      5.......................................................#", # Row 22 Temple / Weapon Smith
    "#...#       #.....................#      #...........................####6####...................#", # Row 23 Magic Shop
    "#...#       #.....................########...........................#       #...................#", # Row 24
    "#...#       #........................................................#       #...................#", # Row 25
    "#...#       #........................................................#       #...................#", # Row 26
    "#...#########........................................................#########...................#", # Row 27
    "#................................................................................................#", # Row 28
    "#................................................................................................#", # Row 29
    "#................................................................................................#", # Row 30
    "#................................................................................................#", # Row 31
    "##################################################################################################", # Row 32
]

# Basic validation (runs at import time)
assert len(TOWN_LAYOUT) == MAP_HEIGHT, f"Town layout height mismatch: {len(TOWN_LAYOUT)} vs {MAP_HEIGHT}"
for i, row in enumerate(TOWN_LAYOUT):
    assert len(row) == MAP_WIDTH, f"Town layout row {i} width mismatch: {len(row)} vs {MAP_WIDTH}"

def get_town_map() -> List[List[str]]:
    """Returns the town map as a list of lists."""
    return [list(row) for row in TOWN_LAYOUT]